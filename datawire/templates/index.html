<!doctype html>
<html lang="en" ng-app="datawire">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>datawi.re</title>
    <meta name="description" content="An act of data journalism.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    {% assets filters="cssmin", output="gen/bootstrap.%(version)s.css",
          "vendor/bootstrap/docs/assets/css/bootstrap.css",
          "vendor/bootstrap/docs/assets/css/bootstrap-responsive.css" %}
        <link type="text/css" href="{{ ASSET_URL }}" rel="stylesheet">
    {% endassets %}

    {% assets filters="scss", output="gen/main.%(version)s.css",
          "css/main.scss" %}
        <link type="text/css" href="{{ ASSET_URL }}" rel="stylesheet">
    {% endassets %}
    <link rel="shortcut icon" href="http://assets.pudo.org/img/opennews-favicon.ico" type="image/x-icon" />
</head>

<body ng-controller="AppCtrl">
    <div class="container">
        <nav>
            {% raw %}
                <div ng-show="session.logged_in">
                    {{ session.user.name }}, you are logged in.
                    <a href="/profile">Profile</a>
                    <xlink href="{{session.logout_uri}}">Logout</xlink>
                </div>
                <div ng-hide="session.logged_in">
                    You need to log in.
                    <xlink href="{{session.twitter_uri}}">Twitter</xlink>
                    <xlink href="{{session.facebook_uri}}">Facebook</xlink>
                </div>
                <h1>welcome to the datawi.re</h1>
                <a href="/feed">feed</a>
                <a href="/entities">entities</a>
            {% endraw %}    
        </nav>

        {% raw %}
            <div ng-show="currentFlash.visible" class="alert" ng-class="'alert-' + currentFlash.type" >
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                {{ currentFlash.message }}
            </div>
        {% endraw %}    

        <div ng-view></div>

    </div>

    {% for path, tmpl in partial_templates %}
        <script id="{{path}}" type="text/ng-template">{{tmpl|safe}}</script>
    {% endfor %}

    {% assets filters="uglifyjs", output="gen/deps.%(version)s.js",
          "vendor/angular/angular.js",
          "vendor/jquery/jquery.js",
          "vendor/handlebars/handlebars.js",
          "vendor/bootstrap/docs/assets/js/bootstrap.js" %}
        <script type="text/javascript" src="{{ ASSET_URL }}"></script>
    {% endassets %}
    {% assets output="gen/app.%(version)s.js",
          "js/app.js",
          "js/app.ctrl.js",
          "js/profile.ctrl.js" %}
        <script type="text/javascript" src="{{ ASSET_URL }}"></script>
    {% endassets %}
</body>
</html>